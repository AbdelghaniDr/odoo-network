<?xml version='1.0' encoding='utf-8'?>
<openerp>
  <data>
    <menuitem name="Network" id="menu_tools" icon="STOCK_PREFERENCES" />
    <menuitem name="Network" parent="menu_tools" groups="network.group_network_user,network.group_network_manager" id="menu_network" />
    <menuitem name="Configuration" parent="menu_network" id="menu_network_definition" groups="network.group_network_manager" sequence="100" />
    <record model="ir.ui.view" id="edit_network">
      <field name="name">network.material.form</field>
      <field name="model">network.material</field>
      <field name="arch" type="xml">
          <form string="Network Material" version="7.0">
          <sheet>
              <div class="col-md-6">
                  <h1>
                      <separator string="Device Name"/>
                      <field name="name"/>
                  </h1>
              </div>
              <div class="oe_right oe_button_box" name="buttons">
                  <button name="get_connection" icon="fa-refresh" string="Populate" class="oe_stat_button"/>
              </div>
          <notebook>
            <page string="Material Info">
                <div class="col-md-6">
                    <separator string="Commercial Information" />
                    <group>
                        <field name="parent_id" />
                        <field name="supplier_id"  />
                        <field name="date"  />
                        <field name="warranty" />
                    </group>
                </div>
                <div class="col-md-6">
                    <separator string="Technical Information" />
                    <group>
                        <field name="network_id" />
                        <field name="color"/>
                        <field name="user_id"/>
                        <field name="type"  />
                    </group>
                </div>
                <separator string="Softwares" />
                <field name="software_id" nolabel="1" />
            </page>
            <page string="Updates">
              <field name="change_ids" nolabel="1" />
            </page>
            <page string="Network Information">
                <separator string="Hostnames"/>
                <field name="network_information_ids" nolabel="1">
                    <tree  editable="bottom">
                        <field name="hostname"/>
                        <field name="ip_addr"/>
                    </tree>
                    <form>
                        <field name="hostname"/>
                        <field name="ip_addr"/>
                    </form>
                </field>
            </page>
            <page string="Notes">
              <field name="note" nolabel="1" />
            </page>
          </notebook>
          <div class="oe_chatter">
              <field name="message_follower_ids" widget="mail_followers"/>
              <field name="message_ids" widget="mail_thread"/>
          </div>
          </sheet>
        </form>
      </field>
    </record>

    <record id="view_network_material_filter" model="ir.ui.view">
        <field name="name">network.material.select</field>
        <field name="model">network.material</field>
        <field name="arch" type="xml">
            <search string="Search Invoice">
                <field name="supplier_id" operator="child_of"/>
                <field name="user_id" string="Responsible"/>
                <separator string="or..."/>
                <filter domain="[('user_id','=',uid)]" help="My Materials"/>
                <separator string="or..."/>
                <filter domain="[('user_id','=',False)]" help="Not Assigned"/>
                <separator string="or..."/>
                <filter domain="[('network_id','=',False)]" help="Not Responsible"/>
                <group expand="0" string="Group By...">
                    <filter name="group_by_supplier_id" string="Supplier" domain="[]" context="{'group_by':'supplier_id'}"/>
                    <filter string="Responsible" domain="[]"  context="{'group_by':'user_id'}"/>
                    <filter string="Invoice Month" domain="[]"  context="{'group_by':'warranty'}"/>
                    <filter string="Due Month" domain="[]"  context="{'group_by':'date'}"/>
                </group>
           </search>
        </field>
    </record>

    <record model="ir.ui.view" id="material_view">
      <field name="name">network.material.tree</field>
      <field name="model">network.material</field>
      <field name="field_parent">child_id</field>
      <field name="arch" type="xml">
        <tree string="All Network Material">
          <field name="name" />
          <field name="user_id" />
          <field name="type" />
          <field name="supplier_id" />
          <field name="date" />
          <field name="warranty" />
        </tree>
      </field>
    </record>

    <record model="ir.ui.view" id="view_network_material_kanban">
        <field name="name">network.material.kanban</field>
        <field name="model">network.material</field>
        <field name="arch" type="xml">
            <kanban version="7.0" class="oe_background_grey">
                <field name="parent_id"/>
                <field name="supplier_id"/>
                <field name="date"/>
                <field name="warranty"/>
                <field name="network_id"/>
                <field name="color"/>
                <field name="user_id"/>
                <field name="type"/>
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_color_#{kanban_getcolor(record.color.raw_value)} oe_kanban_card oe_kanban_project oe_kanban_global_click">
                            <div class="oe_dropdown_toggle oe_dropdown_kanban" groups="base.group_user">
                                <span class="oe_e">Ã­</span>
                                <ul class="oe_dropdown_menu">
                                    <t t-if="widget.view.is_action_enabled('edit')"><li><a type="edit">Settings</a></li></t>
                                    <t t-if="widget.view.is_action_enabled('delete')"><li><a type="delete">Delete</a></li></t>
                                    <li><ul class="oe_kanban_colorpicker" data-field="color"/></li>
                                </ul>
                            </div>
                            <div class="oe_kanban_content">
                                <h4><field name="name"/></h4>
                                <div class="oe_kanban_alias" t-if="record.network_id.raw_value">
                                    <span class="oe_e oe_e_alias">?</span><small><field name="network_id"/></small>
                                </div>
                                <div class="oe_kanban_alias" t-if="! record.network_id.raw_value">
                                    <span class="oe_e oe_e_alias">?</span><small><b style="color:red;">Set a network, Not sniffed yet</b></small>
                                </div>
                                <div class="oe_kanban_alias" t-if="record.user_id.raw_value">
                                    <span class="oe_e oe_e_alias">%%</span><small><field name="user_id"/></small>
                                </div>
                                <div class="oe_kanban_alias" t-if="! record.user_id.raw_value">
                                    <span class="oe_e oe_e_alias">%%</span><small><b style="color:red;">Set a Responsible</b></small>
                                </div>
                                <div class="oe_kanban_footer_left">
                                    <span groups="project.group_time_work_estimation_tasks">
                                        <span class="oe_e">R</span>
                                    </span>
                                    <span t-if="record.date.raw_value">
                                        <span class="oe_e">N</span>
                                        <field name="date"/>
                                    </span>
                                    <span t-if="record.warranty.raw_value">
                                        <span class="oe_e">N</span>
                                        <field name="date"/>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record model="ir.ui.view" id="view_software_type_form">
      <field name="name">network.software.type.form</field>
      <field name="model">network.software.type</field>
      <field name="arch" type="xml">
          <form string="Software Type" version="7.0">
            <group>
                <field name="name" />
                <field name="note" />
            </group>
          </form>
      </field>
    </record>
    <record model="ir.actions.act_window" id="action_software_type">
      <field name="name">Software Type</field>
      <field name="res_model">network.software.type</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
    </record>
    <menuitem name="Software" parent="menu_network_definition" id="menu_software" />
    <menuitem name="Types" parent="menu_software" id="menu_action_software_type" action="action_software_type" groups="network.group_network_manager" />
    <record model="ir.ui.view" id="view_hardware_type_form">
      <field name="name">network.hardware.type.form</field>
      <field name="model">network.hardware.type</field>
      <field name="arch" type="xml">
        <form string="Hardware Type" version="7.0">
            <group>
                <field name="name" />
                <field name="networkable" />
            </group>
        </form>
      </field>
    </record>
    <record model="ir.actions.act_window" id="action_hard_type">
      <field name="name">Hardware Type</field>
      <field name="res_model">network.hardware.type</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
    </record>
    <menuitem name="Hardware" parent="menu_network_definition" id="menu_hardware" />
    <menuitem name="Types" parent="menu_hardware" id="menu_action_hard_type" action="action_hard_type" groups="network.group_network_manager" />
    <record model="ir.ui.view" id="password_form">
      <field name="name">network.software.logpass.form</field>
      <field name="model">network.software.logpass</field>
      <field name="arch" type="xml">
          <form string="Add a password" version="7.0">
              <group>    
                 <field name="login" />
                 <field name="password" />
             </group>    
        </form>
      </field>
    </record>
    <record model="ir.ui.view" id="password_tree">
      <field name="name">network.software.logpass.tree</field>
      <field name="model">network.software.logpass</field>
      <field name="arch" type="xml">
        <tree string="Passwords">
          <field name="login" />
          <field name="password" />
        </tree>
      </field>
    </record>
    <record model="ir.ui.view" id="software_form">
      <field name="name">network.software.form</field>
      <field name="model">network.software</field>
      <field name="arch" type="xml">
        <form string="Network Softwares" version="7.0">
            <separator string="General Informations"/>
            <group>
                <field name="name" />
                <field name="type" />
                <field name="date"  />
                <field name="email"  />
            </group>
            <separator string="Login / Password" />
            <group>
                <field name="logpass" nolabel="1" />
            </group>
            <separator string="Notes" />
            <group>
                <field name="note" nolabel="1" />
            </group>
        </form>
      </field>
    </record>
    <record model="ir.ui.view" id="view_software_tree">
      <field name="name">network.software.tree</field>
      <field name="model">network.software</field>
      <field name="arch" type="xml">
        <tree string="Network Softwares">
          <field name="name" />
          <field name="type" />
          <field name="email" />
          <field name="date" />
        </tree>
      </field>
    </record>
    <!--         Network Network -->
    <record model="ir.ui.view" id="add_network_view">
      <field name="name">network.network.form</field>
      <field name="model">network.network</field>
      <field name="arch" type="xml">
        <form string="Network Element" version="7.0">
            <separator string="Network Definition"  />
            <group>
                <field name="name"/>
                <field name="range" />
                <field name="user_id" />
                <field name="contact_id" />
            </group>
            <field name="material_ids" nolabel="1" >
            <form string="Network Material" version="7.0">
              <label for="name"/>
              <field name="name"  />
              <notebook>
                <page string="Material Info">
                    <separator string="Informations"  />
                    <group>  
                        <field name="type"  />
                        <field name="supplier_id"/>
                        <field name="date"  />
                        <field name="warranty" />
                        <field name="parent_id" />
                    </group>
                  <separator string="Softwares"  />
                  <field name="software_id" nolabel="1"  />
                </page>
                <page string="Updates">
                  <field name="change_ids" nolabel="1"  />
                </page>
                <page string="Notes">
                  <field name="note" nolabel="1"  />
                </page>
              </notebook>
            </form>
          </field>
        </form>
      </field>
    </record>
    <record model="ir.ui.view" id="view_network_tree">
      <field name="name">network.network.tree</field>
      <field name="model">network.network</field>
      <field name="arch" type="xml">
        <tree string="All Networks">
          <field name="name" />
          <field name="user_id" />
          <field name="contact_id" />
        </tree>
      </field>
    </record>
    <menuitem name="Network List" parent="menu_network" id="menu_add_view_network" action="view_add_view_network" groups="network.group_network_user" />
    <record model="ir.actions.act_window" id="action_material_tree">
      <field name="name">All Materials</field>
      <field name="res_model">network.material</field>
      <field name="view_type">form</field>
      <field name="view_mode">kanban,tree,form</field>
      <field name="search_view_id" ref="network.view_network_material_filter"/>
    </record>
    <menuitem name="All Materials" parent="menu_network" id="menu_action_material_tree" action="action_material_tree" groups="network.group_network_manager,network.group_network_user" />
    <record model="ir.ui.view" id="add_diary_entry_form">
      <field name="name">network.changes.form</field>
      <field name="model">network.changes</field>
      <field name="arch" type="xml">
        <form string="Enter a diary entry" version="7.0">
            <separator string="Diary entry"  />
            <group>
                <field name="name"  />
                <field name="date"  />
                <field name="user_id"  />
                <field name="task_id" required="True"  />
            </group>
          <separator string="Description"  />
          <field name="description"  nolabel="1" />
        </form>
      </field>
    </record>
    <record model="ir.ui.view" id="add_diary_entry_tree">
      <field name="name">network.changes.tree</field>
      <field name="model">network.changes</field>
      <field name="arch" type="xml">
        <tree string="Interventions">
          <field name="date" />
          <field name="user_id" />
          <field name="name" />
          <field name="task_id" />
        </tree>
      </field>
    </record>
  </data>
</openerp>
